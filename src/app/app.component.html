<header>
  <div class="container nav">
    <div class="brand">
      <div class="logo" aria-hidden="true"></div>
      <h1>Noticias360</h1>
    </div>

    <div class="nav-actions">
      <!-- BotÃ³n de tema -->
      <button class="btn" (click)="toggleTheme()">
        {{ themeLabel }}
      </button>

      <!-- Si NO estÃ¡ logueado â†’ botÃ³n Iniciar sesiÃ³n -->
      <button
        class="btn login-btn"
        *ngIf="!isLoggedIn()"
        (click)="goLogin()">
        Iniciar sesiÃ³n
      </button>

      <!-- Si SÃ estÃ¡ logueado â†’ nombre + menÃº -->
      <div class="user-wrapper" *ngIf="isLoggedIn() && user() as u">
        <button
          type="button"
          class="btn user-btn"
          (click)="toggleUserMenu()">
          {{ u.name }} {{ u.lastName }}
          <span class="chevron">âŒ„</span>
        </button>

        <!-- MenÃº desplegable -->
        <div class="user-menu" *ngIf="showUserMenu()">
          <button type="button" (click)="goProfile()">Perfil</button>
          <button type="button" (click)="logout()">Cerrar sesiÃ³n</button>
        </div>
      </div>
    </div>
  </div>
</header>

<main *ngIf="isLoggedIn(); else publicLayout">
  <div class="app-layout">
    <!-- BARRA LATERAL -->
    <aside class="sidebar">
      <div class="sidebar-header">
        <span class="sidebar-title">Panel</span>
      </div>

      <nav class="sidebar-nav">
        <button class="sidebar-item" routerLink="/">
          ğŸ  Inicio
        </button>

        <button class="sidebar-item" routerLink="/">
          Noticias inteligentes
        </button>

        <button class="sidebar-item" routerLink="/admin" *ngIf="auth.isAdmin()">
          ğŸ“° GestiÃ³n de noticias
        </button>

        <button class="sidebar-item" routerLink="/rol" *ngIf="auth.isAdmin()">
          ğŸ‘¤ GestiÃ³n de usuarios
        </button>

        <button class="sidebar-item" routerLink="/scrapper" *ngIf="auth.isAdmin()">
          ğŸ§º RecolecciÃ³n de Noticias
        </button>


      </nav>
    </aside>

    <!-- CONTENIDO PRINCIPAL -->
    <section class="app-content">
      <router-outlet></router-outlet>
    </section>
  </div>
</main>

<ng-template #publicLayout>
  <main>
    <router-outlet></router-outlet>
  </main>
</ng-template>

